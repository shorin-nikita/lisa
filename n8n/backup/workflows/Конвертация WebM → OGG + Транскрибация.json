{
  "name": "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è WebM ‚Üí OGG + –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è",
  "nodes": [
    {
      "parameters": {
        "content": "# üéôÔ∏è –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è WebM ‚Üí OGG + –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è\n\n–ê–≤—Ç–æ—Ä: [Nikita Shorin](https://www.youtube.com/@shorin_nikita)\n\n## –û–ø–∏—Å–∞–Ω–∏–µ\n–í–æ—Ä–∫—Ñ–ª–æ—É –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤–∏–¥–µ–æ—Ñ–∞–π–ª—ã WebM –≤ –∫–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∞—É–¥–∏–æ OGG —Å –∫–æ–¥–µ–∫–æ–º Opus –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç –∏—Ö —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Whisper.\n\n## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:\n\n1. üü° **–§–æ—Ä–º–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏**:\n   - –û—Ç–∫—Ä–æ–π—Ç–µ URL —Ñ–æ—Ä–º—ã –∏–∑ –Ω–æ–¥—ã \"–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã\"\n   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ WebM —Ñ–∞–π–ª —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É\n\n2. üü¢ **–¢–µ–∫—Å—Ç**:\n   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –ª—é–±—ã—Ö —Ü–µ–ª–µ–π\n \n## –§—É–Ω–∫—Ü–∏–∏:\n- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è WebM –≤ OGG (Opus codec)\n- ‚úÖ –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ: 32 kbit/s, mono, 16 kHz\n- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –≥–æ–ª–æ—Å–∞ (VoIP application)\n- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π Whisper\n- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã /tmp)\n- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤\n\n## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:\n1. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã** - –∑–∞–≥—Ä—É–∑–∫–∞ WebM —Ñ–∞–π–ª–∞\n2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π** - —Å–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π /tmp –¥–ª—è —Ñ–∞–π–ª–æ–≤\n3. **–ó–∞–ø–∏—Å—å –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ WebM –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é\n4. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è FFmpeg** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ OGG Opus\n5. **–ß—Ç–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞** - –∑–∞–≥—Ä—É–∑–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ OGG\n6. **–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è Whisper** - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π Whisper API\n7. **–£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** - –æ—á–∏—Å—Ç–∫–∞ /tmp\n8. **–¢–µ–∫—Å—Ç** - –≤—ã–≤–æ–¥ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\n\n## –†–µ–∑—É–ª—å—Ç–∞—Ç:\n- **–í—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª**: WebM (–≤–∏–¥–µ–æ + –∞—É–¥–∏–æ)\n- **–í—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª**: OGG Opus (—Ç–æ–ª—å–∫–æ –∞—É–¥–∏–æ, ~240 KB/–º–∏–Ω)\n- **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è**: –¢–µ–∫—Å—Ç–æ–≤–∞—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ä–µ—á–∏\n- **–°–∂–∞—Ç–∏–µ**: ~95% —ç–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞ (4.4 MB ‚Üí 289 KB)\n- **–°–∫–æ—Ä–æ—Å—Ç—å**: ~48x –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏\n\n# –ë–æ–ª—å—à–µ AI –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏: [@PrideAIBot](https://t.me/PrideAIBot)",
        "height": 1116,
        "width": 1088,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1008,
        272
      ],
      "id": "d123456b-ada9-4317-9990-44ce7f45ade2",
      "name": "üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"
    },
    {
      "parameters": {
        "formTitle": "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è WebM –≤ OGG",
        "formFields": {
          "values": [
            {
              "fieldLabel": "data",
              "fieldType": "file"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -960,
        96
      ],
      "id": "ec91a3da-843d-4da9-8046-3e84a7eeebce",
      "name": "–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã",
      "webhookId": "b2a38a9e-827b-4ed2-a7c3-cb1b974e9bb2"
    },
    {
      "parameters": {
        "jsCode": "// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤\nconst timestamp = Date.now();\nconst inputPath = `/tmp/input_${timestamp}.webm`;\nconst outputPath = `/tmp/output_${timestamp}.ogg`;\n\nreturn {\n  json: {\n    inputPath: inputPath,\n    outputPath: outputPath\n  },\n  binary: {\n    data: items[0].binary.data\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -736,
        96
      ],
      "id": "e8bb0238-cd80-4f69-8771-71eef0a4939d",
      "name": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "={{ $json.inputPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -512,
        96
      ],
      "id": "f54cfe52-d189-4c60-9200-6d1294db287e",
      "name": "–ó–∞–ø–∏—Å—å –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"
    },
    {
      "parameters": {
        "command": "=ffmpeg -y -i {{ $json.inputPath }} -map 0:a:0 -vn -c:a libopus -b:a 32k -vbr constrained -ac 1 -ar 16000 -application voip -map_metadata -1 {{ $json.outputPath }}"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        -288,
        96
      ],
      "id": "29132d2a-b1f7-4f98-b038-5746121593ab",
      "name": "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è FFmpeg"
    },
    {
      "parameters": {
        "fileSelector": "={{ $('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π').item.json.outputPath }}",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        -64,
        96
      ],
      "id": "50ae0878-7448-414f-a0bf-8f85d2ccc70f",
      "name": "–ß—Ç–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"
    },
    {
      "parameters": {
        "command": "=rm -f {{ $('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π').item.json.inputPath }} {{ $('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π').item.json.outputPath }}"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        416,
        96
      ],
      "id": "c4e2544c-7429-4959-b6bf-0d9b970c2c7a",
      "name": "–£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"
    },
    {
      "parameters": {
        "content": "",
        "width": 150,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        608,
        80
      ],
      "id": "069cf19c-a4f9-49ca-9f29-053c6c739919",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "",
        "width": 182
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1008,
        80
      ],
      "id": "5466dc64-b0c4-4562-8aba-7cb1c4b2f2d2",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://whisper:8000/v1/audio/transcriptions",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "base"
            },
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        176,
        96
      ],
      "id": "72510e82-8a33-437b-956d-2d069057f567",
      "name": "–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è Whisper"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "f28e16d8-1917-4213-a2a9-7cfed7fc3272",
              "name": "text",
              "value": "={{ $('–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è Whisper').item.json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        640,
        96
      ],
      "id": "084b61c3-b382-4e4e-9968-4bc9ec6820ca",
      "name": "–¢–µ–∫—Å—Ç"
    }
  ],
  "pinData": {},
  "connections": {
    "–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã": {
      "main": [
        [
          {
            "node": "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—É—Ç–µ–π": {
      "main": [
        [
          {
            "node": "–ó–∞–ø–∏—Å—å –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ó–∞–ø–∏—Å—å –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞": {
      "main": [
        [
          {
            "node": "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è FFmpeg",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è FFmpeg": {
      "main": [
        [
          {
            "node": "–ß—Ç–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–ß—Ç–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞": {
      "main": [
        [
          {
            "node": "–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è Whisper",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤": {
      "main": [
        [
          {
            "node": "–¢–µ–∫—Å—Ç",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è Whisper": {
      "main": [
        [
          {
            "node": "–£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  }
}