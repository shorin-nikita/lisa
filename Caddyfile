{
    # Global options - works for both environments
    email {$LETSENCRYPT_EMAIL}
}

# N8N - domain AND localhost
{$N8N_HOSTNAME}, :8001 {
    # For domains, Caddy will automatically use Let's Encrypt
    # For localhost/port addresses, HTTPS won't be enabled
    reverse_proxy n8n:5678
}

# Open WebUI - domain AND localhost
{$WEBUI_HOSTNAME}, :8002 {
    reverse_proxy open-webui:8080
}

# # Ollama API
# {$OLLAMA_HOSTNAME} {
#     reverse_proxy ollama:11434
# }

# Supabase - domain AND localhost
{$SUPABASE_HOSTNAME}, :8005 {
    reverse_proxy kong:8000
}

import /etc/caddy/addons/*.conf